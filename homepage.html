<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOVIEROLL - Watch Movies Online</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* Smooth scroll ke liye */
        html {
            scroll-behavior: smooth;
        }
        /* Netflix-style dark background */
        body {
            background-color: #141414;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            /* Hide scrollbar on load flicker */
            overflow-x: hidden;
        }
        /* Custom scrollbar for horizontal rows */
        .movie-row::-webkit-scrollbar {
            height: 8px;
        }
        .movie-row::-webkit-scrollbar-thumb {
            background-color: #444;
            border-radius: 10px;
        }
        .movie-row::-webkit-scrollbar-track {
            background-color: #1a1a1a;
        }
        
        /* === ANIMATION STYLES === */
        /* Page load animation ke liye initial state */
        .animate-on-load {
            opacity: 0;
            transform: translateY(15px);
            /* transition properties ko yahan define karein */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        
        /* Animation ke baad 'loaded' state */
        .loaded {
            opacity: 1;
            transform: translateY(0);
        }

        /* === PRELOADER STYLES === */
        /* Preloader Fade-out State */
        .preloader-hidden {
            opacity: 0;
            visibility: hidden;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Preloader -->
    <div id="preloader" class="fixed inset-0 bg-[#141414] z-[9999] flex flex-col items-center justify-center transition-opacity duration-500 ease-out">
        <!-- Pulsing Logo -->
        <h1 class="text-4xl sm:text-5xl font-extrabold text-red-600 tracking-wider animate-pulse">MOVIEROLL</h1>
        
        <!-- NEW: Loading Percentage -->
        <p id="loading-percentage" class="text-xl text-gray-400 mt-4">Loading 0%</p>
        
        <!-- Long Loading Notification (Initially Hidden) -->
        <!-- UPDATE: Text changed and delay will be 10s via JS -->
        <div id="loading-notification" class="hidden mt-8 text-center text-gray-400 text-sm max-w-xs px-4">
            <p>New content is loading.</p>
        </div>
    </div>
    <!-- End Preloader -->

    <!-- Header / Navbar -->
    <nav id="navbar" class="fixed top-0 left-0 right-0 z-50 bg-transparent transition-colors duration-300 ease-in-out p-4 sm:p-6">
        <div class="container mx-auto">
            <div class="flex justify-between items-center gap-4">
                <!-- Logo -->
                <h1 class="text-2xl sm:text-3xl font-extrabold text-red-600 tracking-wider flex-shrink-0">MOVIEROLL</h1>
                
                <!-- Desktop Navigation Links -->
                <div class="hidden md:flex space-x-6">
                    <a href="#" class="font-extrabold text-white hover:text-gray-300 transition-colors">Home</a>
                    <a href="#" class="font-extrabold text-white hover:text-gray-300 transition-colors">TV Shows</a>
                    <a href="#" class="font-extrabold text-white hover:text-gray-300 transition-colors">Movies</a>
                    <a href="#" class="font-extrabold text-white hover:text-gray-300 transition-colors">New & Popular</a>
                </div>
                
                <!-- NEW: Search Bar -->
                <div class="flex-grow max-w-xs hidden md:flex">
                    <div class="relative w-full">
                        <input id="desktop-search-input" type="text" placeholder="Search movies..." class="w-full bg-gray-800/50 border border-gray-700 text-white placeholder-gray-400 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent transition-all">
                        <!-- UPDATE: Icon color changed to text-gray-200 for better visibility -->
                        <button id="desktop-search-btn" class="absolute inset-y-0 right-0 flex items-center pr-3">
                            <svg class="w-5 h-5 text-gray-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        </button>
                    </div>
                </div>

                <!-- Right-side Icons (Mobile) -->
                <div class="flex items-center space-x-4">
                    <!-- NEW: Mobile Search Icon -->
                    <!-- UPDATE: Icon size increased to w-8 h-8 for better visibility -->
                    <button id="mobile-search-open-btn" class="md:hidden text-white focus:outline-none">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </button>
                    
                    <!-- Mobile Menu Button (Hamburger Icon) -->
                    <div class="md:hidden">
                        <button id="menu-toggle" class="text-white focus:outline-none">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- NEW: Mobile Search Bar (Initially Hidden) -->
            <div id="mobile-search-bar" class="hidden md:hidden mt-4">
                <div class="relative w-full">
                    <input id="mobile-search-input" type="text" placeholder="Search movies..." class="w-full bg-gray-800/50 border border-gray-700 text-white placeholder-gray-400 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent transition-all">
                    <!-- UPDATE: Icon color changed to text-gray-200 -->
                    <button id="mobile-search-btn" class="absolute inset-y-0 right-0 flex items-center pr-3">
                        <svg class="w-5 h-5 text-gray-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu (Dropdown) -->
            <div id="mobile-menu" class="hidden md:hidden mt-4 bg-black/80 backdrop-blur-sm rounded-lg p-4">
                <a href="#" class="block text-white font-semibold py-2 px-3 hover:bg-gray-700 rounded transition-colors">Home</a>
                <a href="#" class="block text-white font-semibold py-2 px-3 hover:bg-gray-700 rounded transition-colors">TV Shows</a>
                <a href="#" class="block text-white font-semibold py-2 px-3 hover:bg-gray-700 rounded transition-colors">Movies</a>
                <a href="#" class="block text-white font-semibold py-2 px-3 hover:bg-gray-700 rounded transition-colors">New & Popular</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative h-[70vh] md:h-[80vh] min-h-[500px] flex items-end justify-start text-white pb-28 md:pb-32 overflow-hidden">
        <!-- Background Image -->
        <div class="absolute inset-0">
            <img src="bgimage.png" 
                 alt="Featured Movie Banner" 
                 class="w-full h-full object-cover"
                 onerror="this.src='https://placehold.co/1600x900/111/444?text=MOVIEROLL'">
            <!-- Gradient Overlay: Top-to-Bottom -->
            <div class="absolute inset-0 bg-gradient-to-t from-[#141414] via-transparent/50 to-transparent"></div>
            <!-- Gradient Overlay: Left-to-Right -->
            <div class="absolute inset-0 bg-gradient-to-r from-black/60 to-transparent"></div>
            <!-- Gradient Overlay: Bottom Fade (to blend with body) -->
            <div class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-[#141414] to-transparent"></div>
        </div>
        
        <!-- Hero Content -->
        <div class="relative z-20 container mx-auto px-4 sm:px-6 md:px-12 max-w-2xl">
            <h2 class="text-4xl sm:text-5xl md:text-6xl font-extrabold mb-2 animate-on-load">Movie of the Moment</h2>
            <p class="text-base sm:text-lg mb-8 leading-relaxed animate-on-load" style="transition-delay: 200ms;">
                Experience the best movie streamingâ€”completely ad-free. Dive into non-stop entertainment with stunning visuals, powerful stories, and zero interruptions. Watch it now, only on Movieroll.
            </p>
            <div class="flex space-x-6 animate-on-load" style="transition-delay: 400ms;"> 
                <a href="#movie-section" class="bg-white text-black px-6 sm:px-8 py-3 rounded-md text-lg font-bold flex items-center hover:bg-gray-200 transition-all duration-300 transform hover:scale-105">
                    <svg xmlns="https://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                    </svg>
                    Play
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content Area - Movie Rows -->
    <main id="movie-section" class="container mx-auto px-4 sm:px-6 md:px-12 pb-16 -mt-16 md:-mt-36 z-10 relative">
        
        <!-- Row 1: Trending Now -->
        <section class="mb-12 animate-on-load" style="transition-delay: 600ms;">
            <h2 class="text-2xl font-bold mb-3">Action Bollywood</h2>
            <div class="relative">
                <!-- UPDATE: `movie-row` class par event listeners add kiye jayenge JS se -->
                <div class="movie-row flex overflow-x-auto overflow-y-hidden space-x-3 sm:space-x-4 p-2 -m-2">
                    
                    <!-- === MOVIE CARD (Size changed to w-36 sm:w-44 md:w-52) === -->
                    <!-- NEW: Added 'movie-card' class and 'data-title' attribute -->
                    <a href="animal.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md:w-52 group" data-title="Animal">
                        <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                            <img src="animal-img.webp" alt="Animal" class="w-full object-cover aspect-[2/3]" onerror="this.src='https://placehold.co/400x600/222/555?text=Animal'">
                        </div>
                    </a>
                    <!-- === END MOVIE CARD === -->

                    <a href="pathaan.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Pathaan">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="pathan-img.webp" alt="Pathaan" class="w-full object-cover aspect-[2/3]" onerror="this.src='https://placehold.co/400x600/222/555?text=Pathaan'">
                         </div>
                    </a>

                      <a href="anactionhero.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md:w-52 group" data-title="Animal">
                        <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                            <img src="AnActionHero-img.webp" alt="Animal" class="w-full object-cover aspect-[2/3]" onerror="this.src='https://placehold.co/400x600/222/555?text=Animal'">
                        </div>
                      </a>

                    <a href="deva.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Deva">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="deva-img.webp" alt="Deva" class="w-full object-cover aspect-[2/3]" onerror="this.src='https://placehold.co/400x600/222/555?text=Deva'">
                         </div>
                    </a>
                    
                    <a href="BrahmastraPartOneShiva.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Brahmastra Part One Shiva">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="brahmastra-img.webp" alt="Brahmastra" class="w-full object-cover aspect-[2/3]" onerror="this.src='https://placehold.co/400x600/222/555?text=Brahmastra'">
                         </div>
                    </a>
                    
                    <a href="jawan.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Jawan">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="Jawan-img.webp" alt="Jawan" class="w-full object-cover aspect-[2/3]" onerror="this.src='https://placehold.co/400x600/222/555?text=Jawan'">
                         </div>
                    </a>
                    
                    <a href="tiger3.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Tiger 3">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="tiger3.webp" alt="Tiger 3" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>
                    
                    <a href="tigerzindahai.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Tiger Zinda Hai">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="tigerzindahai-img.webp" alt="Tiger Zinda Hai" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>
                    
                    <a href="ekthatiger.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Ek Tha Tiger">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="ekthatiger-img.webp" alt="Ek Tha Tiger" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>
                    <a href="radhe.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Radhe">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="radhe-img.webp" alt="Radhe" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Row 2: Action & Adventure -->
        <section class="mb-12 animate-on-load" style="transition-delay: 750ms;">
            <h2 class="text-2xl font-bold mb-3">Love and Romantic</h2>
            <div class="relative">
                <div class="movie-row flex overflow-x-auto overflow-y-hidden space-x-3 sm:space-x-4 p-2 -m-2">
                        
                    <a href="kabirsingh.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Kabir Singh">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="kabirsign-img.webp" alt="Kabir Singh" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                    <a href="AeDilHaiMushkil.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Ae Dil Hai Mushkil">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="AeDilHaiMushkil-img.webp" alt="Kabir Singh" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                     <a href="saiyaara.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Saiyaara">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="saiyaara-img.webp" alt="Movie C" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>
                        
                    <!-- Example of more cards (size updated) -->
                    <a href="tujhoothimainmakkaar.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Tu jhoothi main makkaar">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="TuJhoothiMainMakkaar-img.webp" alt="Movie B" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>
                    
                    <a href="Gehraiyaan.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Gehraiyaan">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="Gehraiyaan-img.webp" alt="Movie D" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                    <a href="IndooKiJawani.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Indoo Ki Jawani">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="IndooKiJawanifilmposter-img.webp" alt="Movie D" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                    <a href="LoveAajKal.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Love Aaj Kal">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="LoveAajKalfilmposter-img.webp" alt="Movie D" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                    <a href="khogeyekaha.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="kho geye kaha">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="khogeyekaha-img.webp" alt="Movie D" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                    <a href="Mitron.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Mitron">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-3D00 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="Mitron-img.webp" alt="Movie D" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                    <a href="HumChaar.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Hum Chaar">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="HumChaar-img.webp" alt="Movie D" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                    <a href="SonuKeTituKiSweety.html" class="movie-card flex-shrink-0 w-36 sm:w-44 md-w-52 group" data-title="Sonu Ke Titu Ki Sweety">
                         <div class="rounded-lg overflow-hidden shadow-lg transition-all duration-300 ease-in-out group-hover:scale-105 group-hover:brightness-110">
                             <img src="SonuKeTituKiSweety-img.webp" alt="Movie D" class="w-full object-cover aspect-[2/3]">
                         </div>
                    </a>

                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="container mx-auto px-4 sm:px-6 md:px-12 py-8 border-t border-gray-800">
        <div class="text-center text-gray-500 text-sm">
            Movieroll Exclusive Premiere
        </div>
    </footer>

    <!-- NEW: Search Results Modal (Initially Hidden) -->
    <!-- UPDATE: Added transition, opacity, and scale classes for animation -->
    <div id="search-results-overlay" class="fixed inset-0 bg-[#141414]/95 backdrop-blur-md z-[999] hidden p-6 sm:p-8 pt-20 sm:pt-24 overflow-y-auto transition-all duration-300 ease-out opacity-0 scale-95">
        <button id="close-search-btn" class="absolute top-5 right-5 text-gray-400 hover:text-white transition-colors focus:outline-none">
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
        <div class="container mx-auto max-w-4xl">
            <h2 class="text-3xl font-bold mb-6 text-white">Search Results for "<span id="search-query-display"></span>"</h2>
            <div id="search-results-content" class="flex flex-col gap-4">
                <!-- Search results will be injected here by JavaScript -->
            </div>
        </div>
    </div>
    <!-- End Search Results Modal -->


    <!-- JavaScript for Mobile Menu Toggle & Animations -->
    <script>
        // --- Global variable for movie data ---
        let allMovies = [];

        // --- Mobile Menu Toggle ---
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');

        menuToggle.addEventListener('click', () => {
            // 'hidden' class ko toggle (add/remove) karega
            mobileMenu.classList.toggle('hidden');
        });

        // --- Navbar Scroll Effect ---
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                // Scroll karne par dark background add karo
                navbar.classList.add('bg-black/90', 'backdrop-blur-sm', 'shadow-lg');
                navbar.classList.remove('bg-transparent');
            } else {
                // Top par wapas transparent karo
                navbar.classList.remove('bg-black/90', 'backdrop-blur-sm', 'shadow-lg');
                navbar.classList.add('bg-transparent');
            }
        });

        // --- Preloader & Long Load Notification ---
        // UPDATE: Get all preloader elements
        const preloader = document.getElementById('preloader');
        const loadingPercentageText = document.getElementById('loading-percentage');
        const notification = document.getElementById('loading-notification');
        
        // Timer for long loading notification
        // UPDATE: Delay changed to 10 seconds
        const loadingTimer = setTimeout(() => {
            if (notification) {
                // Use 'hidden' class from Tailwind
                notification.classList.remove('hidden');
            }
        }, 10000); // 10 seconds

        // NEW: Fake Progress Logic
        let loadingProgress = 0;
        // This interval simulates the loading progress
        let progressInterval = setInterval(() => {
            if (loadingProgress < 70) {
                loadingProgress += Math.random() * 5; // Faster, more random start
            } else if (loadingProgress < 95) {
                loadingProgress += Math.random() * 1; // Slower towards the end
            }
            // Cap at 95% before the 'load' event fires
            if (loadingProgress > 95) loadingProgress = 95;
            
            if (loadingPercentageText) {
                loadingPercentageText.textContent = `Loading ${Math.floor(loadingProgress)}%`;
            }
        }, 150); // Update every 150ms


        // --- Page Load Animations & Initializers ---
        // 'load' event ka wait karega taaki images load ho jayein aur card ki width sahi mile
        window.addEventListener('load', () => {
            
            // === UPDATED PRELOADER LOGIC ===
            // 1. Stop all timers
            clearTimeout(loadingTimer);
            clearInterval(progressInterval);

            // 2. Force progress to 100%
            loadingProgress = 100;
            if (loadingPercentageText) {
                loadingPercentageText.textContent = 'Loading 100%';
            }

            // 3. Hide the preloader (with a slight delay to show "100%")
            setTimeout(() => {
                if (preloader) {
                    // Add class to trigger fade-out animation
                    preloader.classList.add('preloader-hidden');
                    
                    // Optional: Remove from DOM after animation finishes
                    setTimeout(() => {
                        preloader.style.display = 'none';
                    }, 600); // Must be > transition duration (500ms)
                }
            }, 250); // Show 100% for 250ms
            // === END UPDATED PRELOADER LOGIC ===
            
            // 1. Animations chalao
            const elements = document.querySelectorAll('.animate-on-load');
            elements.forEach((el) => {
                el.classList.add('loaded');
            });

            // 2. Auto-Scroll logic setup karo
            const rows = document.querySelectorAll('.movie-row');
            
            rows.forEach(row => {
                // Har row ke liye shuru me auto-scroll start karo
                startAutoScroll(row);

                // Manual interaction ke liye event listeners add karo
                // 'wheel' = mouse wheel, 'mousedown' = click & drag, 'touchstart' = touch screen
                ['wheel', 'mousedown', 'touchstart'].forEach(eventType => {
                    row.addEventListener(eventType, () => {
                        handleManualInteraction(row);
                    });
                });
            });

            // 3. === NEW: Collect Movie Data for Search ===
            const movieCards = document.querySelectorAll('.movie-card');
            movieCards.forEach(card => {
                allMovies.push({
                    title: card.dataset.title, // 'data-title' attribute se
                    href: card.href,
                    // We can add image src here if we want to show images in search
                    imageSrc: card.querySelector('img') ? card.querySelector('img').src : 'https://placehold.co/200x300/222/555?text=No+Image'
                });
            });
            // console.log(allMovies); // Debugging ke liye
        });


        // --- Auto-Scroll Helper Functions ---

        // Function: Ek row ko scroll karne ka logic
        function autoScrollRow(row) {
            const firstCard = row.querySelector('a');
            if (!firstCard) return; // Row me card nahi hai

            const cardWidth = firstCard.offsetWidth;
            const gap = 16; // 1rem (sm:space-x-4 se)
            const scrollAmount = cardWidth + gap;
            const currentScroll = row.scrollLeft;
            const maxScroll = row.scrollWidth - row.clientWidth;
            let nextScroll = currentScroll + scrollAmount;

            // Check karo ki scroll end tak pahunch gaya hai ya nahi
            if (nextScroll > maxScroll + 1) { // 1px buffer
                // Agar haan, toh wapas start me jao
                row.scrollTo({ left: 0, behavior: 'smooth' });
            } else {
                // Agar nahi, toh next position par jao
                row.scrollTo({ left: nextScroll, behavior: 'smooth' });
            }
        }

        // Function: Ek row ke liye auto-scroll interval start karna
        function startAutoScroll(row) {
            // Purana interval clear karo (agar hai toh)
            if (row.autoScrollInterval) {
                clearInterval(row.autoScrollInterval);
            }
            // Naya interval start karo
            row.autoScrollInterval = setInterval(() => {
                autoScrollRow(row);
            }, 10000); // 10 seconds
        }

        // Function: Manual interaction (scroll/touch) ko handle karna
        function handleManualInteraction(row) {
            // 1. Current auto-scroll ko roko
            if (row.autoScrollInterval) {
                clearInterval(row.autoScrollInterval);
            }

            // 2. Purana inactivity timer clear karo (agar user lagatar scroll kar raha hai)
            if (row.inactivityTimer) {
                clearTimeout(row.inactivityTimer);
            }

            // 3. Naya timer start karo
            // Jab user 15 second tak koi interaction nahi karega, tab auto-scroll resume hoga
            row.inactivityTimer = setTimeout(() => {
                startAutoScroll(row);
            }, 5000); // 5 seconds ka delay (changed from 15 to 5 for faster resume)
        }


        // === NEW: SEARCH FUNCTIONALITY ===

        // --- Get Search DOM Elements ---
        const searchOverlay = document.getElementById('search-results-overlay');
        const searchContent = document.getElementById('search-results-content');
        const closeSearchBtn = document.getElementById('close-search-btn');
        const searchQueryDisplay = document.getElementById('search-query-display');

        const desktopSearchInput = document.getElementById('desktop-search-input');
        const desktopSearchBtn = document.getElementById('desktop-search-btn');
        
        const mobileSearchOpenBtn = document.getElementById('mobile-search-open-btn');
        const mobileSearchBar = document.getElementById('mobile-search-bar');
        const mobileSearchInput = document.getElementById('mobile-search-input');
        const mobileSearchBtn = document.getElementById('mobile-search-btn');

        // --- Function to perform search ---
        function performSearch(query) {
            if (!query || query.trim() === "") {
                return; // Khali search ko ignore karo
            }

            const lowerCaseQuery = query.toLowerCase().trim();
            const searchResults = allMovies.filter(movie => 
                movie.title.toLowerCase().includes(lowerCaseQuery)
            );

            // Update search query display
            searchQueryDisplay.textContent = query;
            // Clear previous results
            searchContent.innerHTML = "";

            if (searchResults.length > 0) {
                // Movies mil gaye
                searchResults.forEach(movie => {
                    const resultHTML = `
                        <a href="${movie.href}" class="flex items-center bg-gray-800/50 hover:bg-gray-700/80 p-3 rounded-lg transition-colors duration-200">
                            <img src="${movie.imageSrc}" alt="${movie.title}" class="w-16 h-24 object-cover rounded-md" onerror="this.src='https://placehold.co/200x300/222/555?text=${movie.title}'">
                            <h3 class="text-xl font-semibold text-white ml-4">${movie.title}</h3>
                        </a>
                    `;
                    searchContent.innerHTML += resultHTML;
                });
            } else {
                // Koi movie nahi mili
                searchContent.innerHTML = `
                    <div class="text-center text-gray-400 text-lg p-8">
                        <p class="mb-2">The movie you searched for is not currently in our library.</p>
                        <p class="font-semibold text-white">We are constantly expanding, and this title will be added soon.</p>
                    </div>
                `;
            }

            // === UPDATE: Show the search overlay WITH animation ===
            // 1. Remove 'hidden' to make it part of the layout
            searchOverlay.classList.remove('hidden');
            // 2. Force browser reflow. Important step.
            void searchOverlay.offsetWidth;
            // 3. Remove opacity and scale classes to trigger the transition
            searchOverlay.classList.remove('opacity-0');
            searchOverlay.classList.remove('scale-95');
        }

        // --- Function to close search ---
        function closeSearch() {
            // === UPDATE: Close search WITH animation ===
            // 1. Add opacity and scale classes to trigger fade-out
            searchOverlay.classList.add('opacity-0');
            searchOverlay.classList.add('scale-95');
            
            // 2. Wait for the animation to finish (300ms)
            setTimeout(() => {
                // 3. Add 'hidden' to remove it from layout
                searchOverlay.classList.add('hidden');
            }, 300); // This duration MUST match the CSS transition duration

            // Clear inputs
            desktopSearchInput.value = "";
            mobileSearchInput.value = "";
        }

        // --- Event Listeners for Search ---

        // Desktop Search
        desktopSearchBtn.addEventListener('click', () => {
            performSearch(desktopSearchInput.value);
        });
        desktopSearchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                performSearch(desktopSearchInput.value);
            }
        });

        // Mobile Search Toggle
        mobileSearchOpenBtn.addEventListener('click', () => {
            mobileSearchBar.classList.toggle('hidden');
            // Agar menu khula hai, toh use band kar do
            if (!mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
            }
        });

        // Mobile Search
        mobileSearchBtn.addEventListener('click', () => {
            performSearch(mobileSearchInput.value);
        });
        mobileSearchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                performSearch(mobileSearchInput.value);
            }
        });

        // Close Search
        closeSearchBtn.addEventListener('click', closeSearch);
        // Optional: Close by clicking overlay background (but not on content)
        searchOverlay.addEventListener('click', (e) => {
            if (e.target === searchOverlay) {
                closeSearch();
            }
        });

    </script>

</body>
</html>
